<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<title>OAuth Example</title>
	<script type="text/javascript">
var auths=null;
// 监听plusready事件  
document.addEventListener( "plusready", function(){
	// 扩展API加载完毕，现在可以正常调用扩展API
	plus.oauth.getServices( function(services){
		auths = services;
	}, function(e){
		alert( "获取分享服务列表失败："+e.message+" - "+e.code );
	} );
}, false );
// 登录操作
function authLogin(){
	var s = auths[0];
	if ( !s.authResult ) {
		s.login( function(e){
			alert( "登录认证成功！" );
		}, function(e){
			alert( "登录认证失败！" );
		} );
	}else{
		alert( "已经登录认证！" );
	}
}
// 获取登录用户信息操作
function authUserInfo(){
	var s = auths[0];
	if ( !s.authResult ) {
		alert("未登录授权！");
	} else {
		s.getUserInfo( function(e){
			alert( "获取用户信息成功："+JSON.stringify(s.userInfo) );
		}, function(e){
			alert( "获取用户信息失败："+e.message+" - "+e.code );
		} );
	}
}
	</script>
	</head>
	<body>
		1.请求登录授权认证操作<br/>
		<button onclick="authLogin()">Login</button>
		2. 获取登录授权用户信息<br/>
		<button onclick="authUserInfo()">UserInfo</button>
	</body>
</html>